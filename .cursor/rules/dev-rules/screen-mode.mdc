---
description: 
globs: 
alwaysApply: false
---
---

description: Flutterç”»é¢ã«ãŠã‘ã‚‹ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ã®ç®¡ç†ã¨ç”»é¢æ§‹é€ åˆ†é›¢ã®æ–¹é‡
ruleType: Auto Attached
globs:

* lib/main.dart
* lib/screens/\*.dart
* lib/widgets/\*.dart

---

## ğŸ§  ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ç®¡ç†æ–¹é‡

* ã‚¢ãƒ—ãƒªã¯2ã¤ã®ä¸»ãƒ¢ãƒ¼ãƒ‰ï¼ˆGenerate / Scanï¼‰ã‚’æŒã¤ï¼š

  ```dart
  enum ScreenMode {
    generate,
    scan,
  }
  ```
* `StatefulWidget` ã®ä¸­ã§ `ScreenMode _mode` ã‚’ä¿æŒã—ã€`setState` ã«ã‚ˆã‚Šåˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚
* Scan ãƒ¢ãƒ¼ãƒ‰å†…ã§ã¯ã•ã‚‰ã« "ã‚«ãƒ¡ãƒ©ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" ã¨ "ç”»åƒã‹ã‚‰ã‚¹ã‚­ãƒ£ãƒ³" ã®ã‚µãƒ–ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚‹ï¼š

  ```dart
  bool isPhotoMode = false;
  ```
* `isPhotoMode` ã®åˆ‡ã‚Šæ›¿ãˆä¾‹ï¼š

  ```dart
  ElevatedButton(
    onPressed: () => setState(() {
      isPhotoMode = !isPhotoMode;
    }),
    child: Text(isPhotoMode ? 'Scan from Camera' : 'Scan from Photos'),
  );
  ```

## ğŸ§© UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆæŒ‡é‡

* ç”»é¢å…¨ä½“ã¯2ã¤ã® `Screen` ã«åˆ†ã‘ã‚‹ï¼š

  * `generate_screen.dart`
  * `scan_screen.dart`
* å„ç”»é¢ã¯ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å«ã‚€ï¼š

  * QRè¡¨ç¤ºé ˜åŸŸï¼ˆ`QrDisplayWidget`ï¼‰
  * å…¥åŠ›é ˜åŸŸã¾ãŸã¯èª­ã¿å–ã‚ŠçŠ¶æ…‹è¡¨ç¤ºï¼ˆ`TextInputArea`, `ScanStatusText`ï¼‰
  * ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³åˆ—ï¼ˆ`ModeSwitchButtons`ï¼‰

## ğŸ“ å‘½åè¦å‰‡ã¨æ§‹é€ 

* Widgetåã¯ PascalCase ã§ `.dart` ãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¸€è‡´ã•ã›ã‚‹

  * ä¾‹ï¼š`class QrDisplayWidget` â†’ `qr_display_widget.dart`
* `widgets/` ä»¥ä¸‹ã«å†åˆ©ç”¨å¯èƒ½ãªéƒ¨å“ã‚’é…ç½®ã—ã€å„ç”»é¢ã‹ã‚‰ `import` ã™ã‚‹
* çŠ¶æ…‹ã‚’ä¿æŒã—ãªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `StatelessWidget` ã‚’åŸºæœ¬ã¨ã™ã‚‹
* çŠ¶æ…‹ã‚’æŒã¤ç”»é¢ã«ã¯ `StatefulWidget` ã‚’ä½¿ã„ã€`setState()` ã§å³æ™‚åæ˜ ã™ã‚‹

## ğŸ“‹ å®Ÿè£…è£œè¶³

* TextField ã® `onChanged` ã«ã‚ˆã‚Š `qrData` ã‚’å³æ™‚æ›´æ–° â†’ `QrImage` ã«ãƒã‚¤ãƒ³ãƒ‰
* `Scan from Photos` â‡„ `Scan from Camera` ã¯ `isPhotoMode` ã®ãƒˆã‚°ãƒ«ã§åˆ‡ã‚Šæ›¿ãˆ
* å„ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆæ“ä½œå¾Œã¯ `setState()` ã«ã‚ˆã‚Šç”»é¢ã‚’å³åº§ã«æ›´æ–°
* ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ä¾‹ï¼š

  ```dart
  if (cameraPermissionDenied) {
    return const Text('ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¦ã„ã¾ã™');
  }
  ```

---

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯ `main.dart` ã‚„ `generate_screen.dart`, `scan_screen.dart`ã€ãŠã‚ˆã³ `widgets/` ä»¥ä¸‹ã®å†åˆ©ç”¨UIæ§‹æˆã«ãŠã„ã¦ã€
Cursorã®ã‚³ãƒ¼ãƒ‰è£œå®Œã‚„èª¬æ˜ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ç›®çš„ã§å¸¸æ™‚å‚ç…§ã•ã‚Œã‚‹ã€‚

